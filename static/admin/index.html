<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Content Manager</title>
</head>

<body>
	<!-- Include the script that builds the page and powers Netlify CMS -->
	<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
	<script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
	<script
		src="https://sharadcodes.github.io/hugo-shortcodes-netlify-cms/dist/hugo_shortcodes_netlify_cms.js"></script>
		<script>
			CMS.registerEditorComponent({
				id: "figure2",
				label: "Figure2",
				fields: [{
						name: "caption",
						label: "Figure Caption",
						widget: "string"
					},
					{
						name: "src",
						label: "Figure img",
						widget: "image"
					},
					{
						name: "link",
						label: "Figure link",
						widget: "string"
					},
				],
				pattern: /{{< figure src="([a-zA-Z0-9-_ ]+)" title="([a-zA-Z0-9-_ ]+)" >}}/,
				fromBlock: function(match) {
					return {
						title: match[1],
						src: match[2],
					};
				},
				toBlock: function(obj) {
					return `{{< figure src="${obj.src}" caption="${obj.caption}" link="${obj.link}}">}}`;
				},
				toPreview: function(obj) {
					return `<figure><img src=${obj.src} alt=${obj.caption}><figcaption>${obj.caption}</figcaption></figure>`;
				},
			});
		</script>
</body>

</html>
